<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mah√© <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/google_developers_icon_128.png"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Agenda</h2>
    </hgroup>
    <article>
      <ul>
        <li>Bean initialization</li>
        <li>Bean lifecycle</li>
		<li>Configuration</li>
        <li>Specifications</li>
		<li>Spring profile</li>
		<li>Changes in  versions 3.1, 3.2 and 4.0</li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Bean initialization (constructor DI)</h2>
	  <h3>Based on spring training materials</h3>
    </hgroup>
    <article class="smaller">
      <ul>
        <li>enforce mandatory dependencies</li>
        <li>promote immutability</li>
		<li>creation & injection on one line</li>
      </ul>
		<p>Example:<pre class="prettyprint" data-lang="java">
@Controller
public class AuditController {

	<b>@Autowired</b>
	public AuditController(
			@Qualifier(ExeServiceSpringBean.EXE_SERVICE) ExeServiceApi serviceQuery,
			@Qualifier(ExeServiceSpringBean.EXE_EXPORT_BEAN) ExeExportApi serviceExport) {
		this.serviceQuery = serviceQuery;
		this.serviceExport = serviceExport;
	
...	
	
}	
		</pre></p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Bean initialization (setter DI)</h2>
    </hgroup>
    <article class="smaller">
      <ul>
        <li>allow optional dependencies and defaults</li>
        <li>support inheritance</li>
      </ul>
		<p>Example:<pre class="prettyprint" data-lang="java">
public class MessageHolder {

    private String message = "Default message";
	
    public String getMessage() {return message;}
	
    public void setMessage(String message) {
        this.message = message;
    }
}</pre>
<pre class="prettyprint" data-lang="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" ...&gt;
    &lt;bean id="message" class="org.somepackage.MessageHolder"&gt;
        <b>&lt;property name="message" value="New value" /&gt;</b>
    &lt;/bean&gt;
&lt;/beans&gt;</pre>		
		</p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Bean initialization (recommendations)</h2>
	  <h3>Based on spring training materials</h3>
    </hgroup>
    <article>
      <ul>
        <li>use constructors for required properties</li>
        <li>use setters for optional or overwrite properties</li>
		<li>do not fight with injection strategy</li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Core - lifecycle</h2>
	  <h3>Based on spring training materials</h3>
    </hgroup>
    <article class="smaller">
      TODO
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Configuration</h2>
    </hgroup>
    <article class="smaller">
      TODO
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Spring Profiles and XML Configuration</h2>
    </hgroup>
    <article class="smaller">
      <p>Definition of profiles:<pre class="prettyprint" data-lang="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" ...&gt;
    &lt;beans <b>profile="dev"</b>&gt;
        &lt;import resource="classpath:/META-INF/spring/app-context-dev.xml"/&gt;
    &lt;/beans&gt;
    &lt;beans profile="prod"&gt;
        &lt;import resource="classpath:/META-INF/spring/app-context-prod.xml"/&gt;
    &lt;/beans&gt;
&lt;/beans&gt;</pre>
		</p>
      <p>Profile activation:<pre class="prettyprint" data-lang="java">
// in java
System.setProperty("spring.profiles.active", "dev");
// JVM param
-Dspring.profiles.active="dev"
# Setting a property value
spring.profiles.active=dev</pre>
		</p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Spring Profiles and Annotation Configuration</h2>
    </hgroup>
    <article class="smaller">
		<p>Definition of profiles:<pre class="prettyprint" data-lang="java">
@Component
<b>@Profile("dev")</b>
public class UserDAOImpl implements UserDAO {
}	

@Component
<b>@Profile("prod")</b>
public class UserDAOImpl implements UserDAO {
}</pre>
	  </p>
      <p>Profile activation:<pre class="prettyprint" data-lang="java">
@ContextConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
<b>@ActiveProfiles("dev")</b>
public class UserServiceDaoTest {

	@Autowired
	private UserDAO dao;

}</pre>
		</p>		
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Spring Profiles and Custom Annotation</h2>
    </hgroup>
    <article class="smaller">
		<p>Definition of profiles:<pre class="prettyprint" data-lang="java">
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
<b>@Profile("dao")</b>
public @interface Dao {
}</pre>
	  </p>
      <p>Usage:<pre class="prettyprint" data-lang="java">
@Component
<b>@Dao</b>
public class UserDAOImpl implements UserDAO {
	...
}</pre>
		</p>		
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Spring Profiles - Real scenario</h2>
    </hgroup>
    <article class="smaller">
      <p>Example of datasource handling:<pre class="prettyprint" data-lang="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" ...&gt;

    <b>&lt;bean profile="dev"&gt;</b>
	&lt;jdbc:embedded-database id="dataSource"&gt;
		&lt;jdbc:script location="classpath:com/bank/config/sql/schema.sql"/&gt;
		&lt;jdbc:script location="classpath:com/bank/config/sql/test-data.sql"/&gt;
	&lt;/jdbc:embedded-database&gt;
    &lt;/bean&gt;

    <b>&lt;bean profile="prod"&gt;</b>
        &lt;jee:jndi-lookup id="dataSource" jndi-name="java:comp/env/jdbc/datasource"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre>
		</p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Specification JSR-250 - Semantic concept</h2>
	  <h3>Based on <a href="http://en.wikipedia.org/wiki/JSR_250">wikipedia</a></h3>
    </hgroup>
    <article class="smaller">
      <p>JSR 250 is a specification of annotations for common semantic concepts in the Java SE and Java EE platforms that apply across a variety of individual technologies.</p>
	  <p>Examples:
		  <table>
			<tr>
			  <th class="highlight">Annotation name</th>
			  <th class="highlight">Description</th>
			</tr>
			<tr>
			  <td>Generated</td>
			  <td>Marks sources that have been generated</td>
			</tr>
			<tr>
			  <td>Resource</td>
			  <td>Declares a reference to a resource (e.g. from JNDI, servlet context, etc.)</td>
			</tr>
			<tr>
			  <td>PostConstruct</td>
			  <td>Do initialization</td>
			</tr>
			<tr>
			  <td>PreDestroy</td>
			  <td>Do finalization</td>
			</tr>
			<tr>
			  <td>RolesAllowed</td>
			  <td>Specifies the security roles permitted to access method(s) in an application</td>
			</tr>
		  </table>	  
	  </p>		  
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Specification JSR-303 - Bean Validation</h2>
    </hgroup>
    <article class="smaller">
		<p><a href="http://en.wikipedia.org/wiki/Bean_Validation">Bean Validation</a> (via JSR-303)defines a metadata model and API for JavaBean validation. The metadata source is annotations, with the ability to override and extend the meta-data through the use of XML validation descriptors.</p>
      <pre class="prettyprint" data-lang="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" ...&gt;
    <b>&lt;mvc:default-servlet-handler/&gt;</b>
&lt;/beans&gt;</pre>
      <pre class="prettyprint" data-lang="java">
public class AuditForm {
	<b>@Past(message = ValidationConsts.MESSAGE_KEY_PAST)</b>
	private Date platnostOd;

	<b>@Size(max = ValidationConsts.FIELD_SIZE_USERNAME, message = ValidationConsts.MESSAGE_KEY_SIZE)</b>
	private String username;
}
@Controller
public class AuditController extends AbstractExeController {

	@RequestMapping(...)
	public final String search(<b>@Valid</b> @ModelAttribute(SEARCH_FORM) AuditForm form) { ... }
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Specification JSR-330 - DI</h2>
    </hgroup>
    <article class="smaller">
      TODO
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2><a href="http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/new-in-3.1.html">Changes in spring 3.1</a></h2>
    </hgroup>
    <article class="smaller">
      <ul>
		<li><b class="blue3">Bean definition profiles</b></li>
		<li><b class="blue3">PropertySource Abstraction</b></li>
		<li><b class="blue3">c: namespace for more concise constructor injection</b><br/>&lt;bean id="foo" class="x.y.Foo" <b>c:_0-ref="bar"</b> c:_1-ref="baz"&gt;</li>
		<li><b class="blue3">Support for Hibernate 4.x</b></li>
		<li><b class="blue3">JPA EntityManagerFactory bootstrapping without persistence.xml</b></li>
        <li><b class="blue3">Cache abstraction</b></li>
		<li><b class="blue3">Code equivalents for Spring's XML namespaces</b> - support in @Configuration classes for annotations @ComponentScan , @EnableTransactionManagement, @EnableCaching, @EnableAsync, @EnableWebMvc, etc.</li>
		<li><b class="blue3">TestContext framework support for @Configuration classes and bean definition profiles</b></li>
		<li><b class="blue3">Support for Servlet 3</b></li>
		<li>and more ...</li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2><a href="http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/new-in-3.2.html">Changes in spring 3.2</a></h2>
    </hgroup>
    <article class="smaller">
      <ul>
        <li><b class="blue3">Support for Servlet 3 based asynchronous request processing</b></li>
		<li><b class="blue3">Spring MVC</b> - first-class support for testing, content negotiation improvements, @ControllerAdvice, @MatrixVariable, HTTP PATCH method, etc.</li>
		<li><b class="blue3">Jackson JSON 2</b></li>
		<li><b class="blue3">Tiles 3</b></li>
		<li><b class="blue3">Using meta-annotations for injection points and for bean definition methods</b></li>
		<li><b class="blue3">Initial support for JCache 0.5</b></li>
		<li><b class="blue3">Global date & time formatting</b> - including support for @DateTimeFormat without Joda Time</li>
		<li><b class="blue3">Concurrency refinements across the framework</b></li>
		<li><b class="blue3">New Gradle-based build and move to GitHub</b></li>
		<li><b class="blue3">Refined Java SE 7 / OpenJDK 7 support</b></li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2><a href="http://blog.springsource.org/2013/01/16/next-stop-spring-framework-4-0/">Changes in spring 4.0</a></h2>
    </hgroup>
    <article class="smaller">
      <ul>
        <li><b class="blue3">First-class support for Java SE 8 based Spring applications</b> - language features such as lambda expressions; APIs such as JSR-310 Date and Time</li>
		<li><b class="blue3">Configuring and implementing Spring-style applications using Groovy 2</b> - Groovy-based bean definitions; Groovy as the language of choice for an entire app</li>
		<li><b class="blue3">Support for key Java EE 7 technologies</b> - including JMS 2.0, JPA 2.1, Bean Validation 1.1, Servlet 3.1, and JCache</li>
		<li><b class="blue3">Enabling WebSocket-style application architectures</b> - support for JSR-356 compliant runtimes and related technologies</li>
		<li><b class="blue3">Fine-grained eventing and messaging within the application</b> - building on our existing application event and message listener mechanisms</li>
		<li><b class="blue3">Pruning and dependency upgrades</b> - removing deprecated features; raising minimum dependencies to Java 6+ etc</li>
      </ul>
    </article>
  </slide>

  <slide class="thank-you-slide segue nobackground">
    <aside class="gdbar right"><img src="images/google_developers_icon_128.png"></aside>
    <article class="flexbox vleft auto-fadein">
      <h2>Thank You!</h2>
    </article>
    <p class="auto-fadein" data-config-contact>
      <!-- populated from slide_config.json -->
    </p>
  </slide>

  <slide class="backdrop"></slide>

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
